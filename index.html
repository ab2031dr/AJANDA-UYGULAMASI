<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Günlük Planlayıcı</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #74ebd5 0%, #ACB6E5 100%);
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
    }

    .controls {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    input, select, button {
      padding: 8px 12px;
      border-radius: 8px;
      border: none;
      outline: none;
      font-size: 14px;
    }

    button {
      background: #4CAF50;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: #45a049;
    }

    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
      margin-top: 20px;
    }

    .day {
      width: 50px;
      height: 50px;
      background: rgba(255,255,255,0.8);
      border-radius: 8px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      position: relative;
      transition: 0.3s;
      font-size: 12px;
    }

    .day:hover {
      background: #ffeaa7;
    }

    .has-task {
      background: #55efc4 !important;
      font-weight: bold;
      color: white;
    }

    #taskList {
      margin-top: 20px;
      width: 100%;
      max-width: 400px;
      list-style: none;
      padding: 0;
    }

    #taskList li {
      background: white;
      margin: 5px 0;
      padding: 10px;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .left {
      display: flex;
      align-items: center;
    }

    .completeBtn {
      width: 18px; height: 18px;
      border: 2px solid #4CAF50;
      border-radius: 50%;
      margin-right: 10px;
      cursor: pointer;
      transition: 0.3s;
    }

    .completeBtn.completed {
      background: #4CAF50;
    }

    #taskList li.completed span {
      text-decoration: line-through;
      color: gray;
    }

    .editBtn {
      background: orange;
      color: white;
      padding: 4px 6px;
      border-radius: 5px;
      margin-left: 5px;
      cursor: pointer;
      font-size: 12px;
    }

    .editBtn:hover { opacity: 0.8; }

    .deleteBtn {
      background: red;
      color: white;
      padding: 4px 6px;
      border-radius: 5px;
      margin-left: 5px;
      cursor: pointer;
      font-size: 12px;
    }

    .deleteBtn:hover { opacity: 0.8; }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 12px;
      width: 300px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .modal-content input {
      width: 100%;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h1>📅 Günlük Planlayıcı</h1>

  <div class="calendar" id="calendar"></div>

  <div class="controls">
    <select id="monthSelect"></select>
    <input type="text" id="taskInput" placeholder="Görev gir">
    <button id="addTask">Ekle</button>
  </div>

  <ul id="taskList"></ul>

  <!-- Düzenleme Modal -->
  <div class="modal" id="editModal">
    <div class="modal-content">
      <h3>Görevi Düzenle</h3>
      <input type="text" id="editInput">
      <button id="saveEdit">Kaydet</button>
      <button onclick="closeModal()">İptal</button>
    </div>
  </div>

  <script>
    const calendar = document.getElementById("calendar");
    const monthSelect = document.getElementById("monthSelect");
    const taskInput = document.getElementById("taskInput");
    const addTaskBtn = document.getElementById("addTask");
    const taskList = document.getElementById("taskList");
    const editModal = document.getElementById("editModal");
    const editInput = document.getElementById("editInput");
    const saveEditBtn = document.getElementById("saveEdit");

    let tasks = JSON.parse(localStorage.getItem("tasks")) || {};
    let selectedDate = null;
    let editTarget = null;

    const monthNames = ["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];
    monthNames.forEach((m, i) => {
      let opt = document.createElement("option");
      opt.value = i;
      opt.textContent = m;
      monthSelect.appendChild(opt);
    });

    const today = new Date();
    monthSelect.value = today.getMonth();

    function drawCalendar(monthIndex) {
      calendar.innerHTML = "";
      let year = today.getFullYear();
      let daysInMonth = new Date(year, monthIndex+1, 0).getDate();

      for (let d = 1; d <= daysInMonth; d++) {
        let div = document.createElement("div");
        div.classList.add("day");
        div.textContent = d;

        let key = `${year}-${monthIndex+1}-${d}`;
        if (tasks[key] && tasks[key].length > 0) {
          div.classList.add("has-task");
        }

        div.addEventListener("click", () => {
          selectedDate = key;
          renderTasks();
        });

        calendar.appendChild(div);
      }
    }

    addTaskBtn.addEventListener("click", () => {
      if (!selectedDate) {
        alert("Lütfen önce bir gün seçin.");
        return;
      }
      let text = taskInput.value.trim();
      if (!text) return;

      tasks[selectedDate] = tasks[selectedDate] || [];
      tasks[selectedDate].push({ text, completed: false });
      taskInput.value = "";
      saveTasks();
      renderTasks();
      drawCalendar(monthSelect.value);
    });

    function renderTasks() {
      taskList.innerHTML = "";
      if (!selectedDate || !tasks[selectedDate]) return;

      tasks[selectedDate].forEach((t, i) => {
        let li = document.createElement("li");

        const leftDiv = document.createElement("div");
        leftDiv.className = "left";

        const completeBtn = document.createElement("div");
        completeBtn.className = "completeBtn";
        if(t.completed) completeBtn.classList.add("completed");
        completeBtn.addEventListener("click", (e)=>{
          e.stopPropagation();
          t.completed = !t.completed;
          saveTasks();
          renderTasks();
        });

        const span = document.createElement("span");
        span.textContent = t.text;
        if(t.completed) span.classList.add("completed");

        leftDiv.appendChild(completeBtn);
        leftDiv.appendChild(span);
        li.appendChild(leftDiv);

        // Düzenle butonu
        const editBtn = document.createElement("button");
        editBtn.textContent = "✏️";
        editBtn.className = "editBtn";
        editBtn.addEventListener("click", (e)=>{
          e.stopPropagation();
          editTarget = { date: selectedDate, index: i };
          editInput.value = t.text;
          editModal.style.display = "flex";
        });

        // Silme butonu
        const deleteBtn = document.createElement("button");
        deleteBtn.textContent = "Sil";
        deleteBtn.className = "deleteBtn";
        deleteBtn.addEventListener("click",(e)=>{
          e.stopPropagation();
          tasks[selectedDate].splice(i,1);
          saveTasks();
          renderTasks();
          drawCalendar(monthSelect.value);
        });

        li.appendChild(editBtn);
        li.appendChild(deleteBtn);

        taskList.appendChild(li);
      });
    }

    saveEditBtn.addEventListener("click", () => {
      if (editTarget) {
        tasks[editTarget.date][editTarget.index].text = editInput.value;
        saveTasks();
        renderTasks();
        closeModal();
      }
    });

    function closeModal() {
      editModal.style.display = "none";
    }

    function saveTasks() {
      localStorage.setItem("tasks", JSON.stringify(tasks));
    }

    monthSelect.addEventListener("change", () => {
      drawCalendar(parseInt(monthSelect.value));
      taskList.innerHTML = "";
      selectedDate = null;
    });

    drawCalendar(monthSelect.value);
  </script>
</body>
</html>